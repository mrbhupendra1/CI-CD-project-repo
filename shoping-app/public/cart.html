<!doctype html>
<html>
<head>
  <meta charset="utf-8"><title>Cart - Aurora Shop</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="header">
    <div class="brand"><div class="logo">AS</div><div><h1>Aurora Shop</h1></div></div>
    <div class="nav"><a href="index.html">Home</a><a href="products.html">Products</a><a href="about.html">About</a></div>
  </div>

  <div style="padding:18px 28px">
    <h2>Your Cart</h2>
    <div id="cart-details" style="max-width:880px"></div>
    <div style="margin-top:18px">
      <button onclick="placeOrder()" style="padding:12px 18px;border-radius:10px;background:linear-gradient(90deg,#06b6d4,#7c3aed);border:none;color:#041025">Place Order</button>
    </div>
  </div>

  <script src="js/products-data.js"></script>
  <script src="js/main.js"></script>
  <script>
    async function renderCartPage(){
      const cart = getCart();
      const prodList = await fetch('/api/products').then(r=>r.ok?r.json():PRODUCTS).catch(()=>PRODUCTS);
      const container = document.getElementById('cart-details');
      if(cart.length===0){ container.innerHTML = '<div style="color:var(--muted)">Cart is empty</div>'; return; }
      let total = 0;
      container.innerHTML = '<div style="display:flex;flex-direction:column;gap:12px"></div>';
      const inner = container.firstElementChild;
      cart.forEach(item=>{
        const p = prodList.find(x=>x.id===item.id);
        total += p.price * item.qty;
        const row = document.createElement('div');
        row.style.display='flex';row.style.justifyContent='space-between';row.style.alignItems='center';
        row.innerHTML = `<div style="display:flex;gap:12px;align-items:center">
            <img src="${p.img}" style="width:80px;height:80px;object-fit:cover;border-radius:10px">
            <div><div style="font-weight:700">${p.name}</div><div style="color:var(--muted)">${p.sku}</div></div>
          </div>
          <div>
            <div style="font-weight:700">${(p.price).toLocaleString('en-IN',{style:'currency',currency:'INR'})}</div>
            <div style="margin-top:8px">
              <button onclick="updateQty(${item.id}, -1)">-</button>
              <span style="padding:6px 10px">${item.qty}</span>
              <button onclick="updateQty(${item.id}, +1)">+</button>
            </div>
          </div>`;
        inner.appendChild(row);
      });
      const totalRow = document.createElement('div');
      totalRow.style.marginTop='18px'; totalRow.innerHTML = `<strong>Total: ${(total).toLocaleString('en-IN',{style:'currency',currency:'INR'})}</strong>`;
      container.appendChild(totalRow);
    }
    renderCartPage();
  </script>
</body>
</html>

